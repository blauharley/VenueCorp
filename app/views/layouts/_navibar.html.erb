<ul class="menu" id="menu">
	
  <li><a href="#" class="menulink">Bundesland/Region/Ort</a>
    <ul>
      <% all_venues.each do |fed_name,venues| %>
        
        <% num = 0 %>
        <% for number_alt in venues %>
          <% num += number_alt[:number].to_i %>
        <% end %>
        
        <li><%= link_to (fed_name + '(' + num.to_s + ')'), get_federal_country_path(fed_name), :class  => 'sub' %>
        
          <ul>
            <% for venue in venues %>
            
              <% if venues.first == venue %>
                <li class="topline"><%= link_to (venue[:name] + '(' + venue[:number].to_s + ')'), get_venue_path(venue[:name]) %></li>
              <% else %>
                <li><%= link_to (venue[:name] + '(' + venue[:number].to_s + ')'), get_venue_path(venue[:name]) %></li>
              <% end %>
                
            <% end %>
          </ul>
          
        </li>
			<% end %>
		</ul>
  </li>
  
	<li><a href="#" class="menulink">Kategorie</a>
    <ul>
      <% all_cats.each do |cat_name,sub_cats| %>
        
        <% num = 0 %>
        <% for number_alt in sub_cats %>
          <% num += number_alt[:number].to_i %>
        <% end %>
        
        <li><%= link_to (cat_name + '(' + num.to_s + ')'), get_main_cat_events_path(cat_name), :class  => 'sub' %>
        
          <ul>
            <% for sub_cat in sub_cats %>
            
              <% if sub_cats.first == sub_cat %>
                <li class="topline"><%= link_to (sub_cat[:name] + '(' + sub_cat[:number].to_s + ')'), get_sub_cat_events_path(sub_cat[:name]) %></li>
              <% else %>
                <li><%= link_to (sub_cat[:name] + '(' + sub_cat[:number].to_s + ')'), get_sub_cat_events_path(sub_cat[:name]) %></li>
              <% end %>
                
            <% end %>
          </ul>
          
        </li>
			<% end %>
		</ul>
  </li>
  
	<li>
		<%= form_tag root_path, :method => 'get' do %>
 
      <p><%= text_field_tag :search, params[:search], :placeholder => 'Suche', :id => 'searchField', :style => "width:250px; height:28px" %>
      <p><div id ='searchResults' style="display:none;"></div></p>
      
  </li>
  
  <li>
    <%= submit_tag 'Veranstaltungen auflisten', :name => nil %><p>
    <% end %> 
  </li>
</ul>

<script type="text/javascript">
	
  // dropdown
  var menu=new menu.dd("menu");
  menu.init("menu","menuhover");
  
  $(document).ready(function(){
      
    // auto-selection
    $('#searchField').keyup(function(event) {
      
      if($('#searchField').val().length == 0){
        $('#searchResults').html('');
        $('#searchResults').css('display', 'none');
      }
      else{
        $('#searchResults').css('display', 'inline');
        $('#searchResults').css('width', $('#searchField').css('width'));
      }
      
      if($('#searchField').val().length){
        $('#searchResults').load("http://" + window.location.host + "/searchForEvents/" + $('#searchField').val() + " #eventResults", function(data) {
          $(this).html(data);
        });
      }
      
    });
    
  });
  
</script>