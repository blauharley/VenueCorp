<script type='text/javascript'>

window.onload = function(){

  $('#calendar').fullCalendar({
    
    theme: true,
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    },
    
    <% if events.empty? %>
      <% event_js_array = '[]' %>
    <% else %>
      <% event_js_array = '[' %>
    <% end %>
    
    <% for event in events %>
      <% if event.start_date && event.end_date %>
        <% event_js_array += "{ id : " << event.id.to_s << ", title : '" << event.title.to_s << "', start : new Date(" << event.start_date.strftime('%Y') << "," << ((event.start_date.strftime('%m').to_i - 1).to_s) <<","<< event.start_date.strftime('%d')<< "),"<< " end : new Date(" << event.end_date.strftime('%Y') << "," << ((event.end_date.strftime('%m').to_i - 1).to_s) <<","<< event.end_date.strftime('%d') << "), className: 'cal_events' }," %>
      <% end %>
    <% end %>
    <% event_js_array = event_js_array[0...event_js_array.length-1] %>
    <% event_js_array += ']' %>
    
    events: <%= raw event_js_array + ',' %>
    
    eventClick: function(event) {
			window.location.href = 'http://' + window.location.host + '/events/' + event.id;
    },
    
    eventMouseover : function( event, jsEvent, view ) { jsEvent.target.style.cursor = 'pointer' }
    
  });

}

</script>
		